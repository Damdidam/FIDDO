/* ═══════════════════════════════════════════════════════
 FIDDO Mobile — Teal Theme v5.0
 ═══════════════════════════════════════════════════════ */

:root {
 --pri: #0891B2; --pri-l: rgba(8,145,178,0.1); --pri-d: #0e7490; --pri-glow: rgba(8,145,178,.2);
 --bg: #f0f4fa; --sf: #fff; --sf2: #f7f9fc; --brd: #dfe6ef; --brd-l: #eef2f7;
 --tx: #0f172a; --tx2: #475569; --tx3: #94a3b8;
 --ok: #059669; --ok-l: #d1fae5; --warn: #d97706; --warn-l: #fef3c7;
 --err: #dc2626; --err-l: #fee2e2; --rew: #f59e0b;
 --r-sm: 12px; --r-md: 16px; --r-lg: 22px; --r-xl: 28px; --r-full: 999px;
 --font: 'Satoshi', -apple-system, BlinkMacSystemFont, sans-serif;
 --sat: env(safe-area-inset-top, 0px);
 --sab: env(safe-area-inset-bottom, 0px);
 --tab-h: 62px;
 --ease: cubic-bezier(.4, 0, .2, 1);
 --bounce: cubic-bezier(.34, 1.56, .64, 1);
}

/* ─── Reset ─────────────────────────────────── */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{height:100%;-webkit-text-size-adjust:100%}
body{font-family:var(--font);background:var(--bg);color:var(--tx);height:100%;overflow:hidden;-webkit-font-smoothing:antialiased;-webkit-tap-highlight-color:transparent;user-select:none}
input,button,textarea{font-family:var(--font);outline:none;border:none}
button{cursor:pointer;background:none}
a{text-decoration:none;cursor:pointer}
.hidden{display:none!important}

/* ─── Screens ───────────────────────────────── */
.screen{position:absolute;inset:0;display:none;flex-direction:column;background:var(--bg);z-index:1;overflow:hidden}
.screen.active{display:flex;animation:screenIn .3s ease forwards}
@keyframes screenIn{from{opacity:0}to{opacity:1}}
.slide-r{z-index:10;transform:translateX(100%);transition:transform .32s cubic-bezier(.25,.46,.45,.94);box-shadow:-8px 0 30px rgba(0,0,0,.08)}
.slide-r.active{transform:translateX(0)}

/* ─── Scrollable ────────────────────────────── */
.tab-body,.card-body,.hist-list,.onboard-content{overflow-y:auto;-webkit-overflow-scrolling:touch;overscroll-behavior-y:contain}

/* ═══════════════════════════════════════════════
 LOGIN — Blue gradient
 ═══════════════════════════════════════════════ */
#screen-login{background:linear-gradient(160deg,#060810 0%,#0a1a24 40%,#0e7490 100%);overflow:hidden}
.login-bg{position:absolute;inset:0;overflow:hidden}
.login-orb{position:absolute;border-radius:50%;filter:blur(80px);opacity:.4;animation:orbFloat 8s ease-in-out infinite}
.orb-1{width:300px;height:300px;background:radial-gradient(circle,#22d3ee,transparent 70%);top:-80px;right:-60px;animation-delay:0s}
.orb-2{width:250px;height:250px;background:radial-gradient(circle,#0891B2,transparent 70%);bottom:10%;left:-40px;animation-delay:2.5s}
.orb-3{width:180px;height:180px;background:radial-gradient(circle,#67e8f9,transparent 70%);top:40%;right:20%;animation-delay:5s}
@keyframes orbFloat{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(20px,-30px) scale(1.1)}66%{transform:translate(-15px,20px) scale(.95)}}

.login-content{position:relative;z-index:2;flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:32px 28px;text-align:center}
.login-title{font-family:'Satoshi',-apple-system,sans-serif;font-size:42px;font-weight:800;color:#fff;letter-spacing:1px;margin-bottom:4px;animation:fadeUp .6s .2s both}
.login-tagline{font-size:15px;color:rgba(255,255,255,.65);font-weight:400;margin-bottom:40px;animation:fadeUp .6s .35s both}
@keyframes fadeUp{from{transform:translateY(16px);opacity:0}to{transform:translateY(0);opacity:1}}

.login-form{width:100%;max-width:360px;animation:fadeUp .6s .5s both}
.login-sent{width:100%;max-width:360px;animation:fadeUp .4s both}

.field{display:flex;align-items:center;background:rgba(255,255,255,.1);backdrop-filter:blur(12px);border:1.5px solid rgba(255,255,255,.15);border-radius:var(--r-md);height:56px;padding:0 16px;gap:10px;margin-bottom:12px;transition:border-color .2s,background .2s}
.field:focus-within{border-color:rgba(255,255,255,.4);background:rgba(255,255,255,.15)}
.field-icon{color:rgba(255,255,255,.5);font-size:22px}
.field input{flex:1;background:none;color:#fff;font-size:16px;font-weight:500}
.field input::placeholder{color:rgba(255,255,255,.35)}

.solid .field,.solid-field{background:var(--sf)!important;border-color:var(--brd)!important;backdrop-filter:none!important}
.solid .field:focus-within,.solid-field:focus-within{border-color:var(--pri)!important}
.solid .field-icon,.solid-field .field-icon{color:var(--tx3)!important}
.solid .field input,.solid-field input{color:var(--tx)!important}
.solid .field input::placeholder,.solid-field input::placeholder{color:var(--tx3)!important}

.btn-primary{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;height:56px;background:linear-gradient(135deg,#0891B2,#0e7490);color:#fff;font-size:16px;font-weight:700;border-radius:var(--r-md);box-shadow:0 4px 20px var(--pri-glow);transition:transform .15s,box-shadow .15s;position:relative;overflow:hidden}
.btn-primary::after{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.15),transparent);opacity:0;transition:opacity .2s}
.btn-primary:active{transform:scale(.97);box-shadow:0 2px 10px var(--pri-glow)}
.btn-primary:active::after{opacity:1}
.btn-primary.loading{pointer-events:none;opacity:.7}
.btn-full{margin-top:20px}

.btn-secondary{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;height:48px;background:rgba(255,255,255,.1);border:1.5px solid rgba(255,255,255,.2);color:#fff;font-size:15px;font-weight:600;border-radius:var(--r-md);transition:background .2s}
.btn-secondary:active{background:rgba(255,255,255,.2)}
.btn-secondary.solid{background:var(--pri-l);border:none;color:var(--pri)}

.login-hint{font-size:12px;color:rgba(255,255,255,.4);margin-top:16px;line-height:1.5}
.sent-anim{width:80px;height:80px;border-radius:50%;background:rgba(255,255,255,.12);display:flex;align-items:center;justify-content:center;margin:0 auto 20px}
.sent-anim .material-symbols-rounded{font-size:40px;color:#22d3ee;animation:popIn .5s var(--bounce)}
@keyframes popIn{from{transform:scale(0)}to{transform:scale(1)}}
.login-sent h2{font-size:22px;color:#fff;margin-bottom:8px}
.login-sent p{color:rgba(255,255,255,.6);font-size:14px;line-height:1.5}
.sent-email{color:#22d3ee!important;font-weight:700;font-size:15px!important;margin:4px 0 8px}
.sent-hint{font-size:12px;color:rgba(255,255,255,.35)!important;margin-bottom:24px}
.link-muted{display:inline-block;color:rgba(255,255,255,.45);font-size:14px;padding:12px;margin-top:4px}
.solid .link-muted{color:var(--tx3)}

/* ═══════════════════════════════════════════════
 VERIFY / CENTER COLUMN
 ═══════════════════════════════════════════════ */
.center-col{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center;gap:12px}
.loader{width:40px;height:40px;border:4px solid var(--brd);border-top-color:var(--pri);border-radius:50%;animation:spin .7s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.error-text{color:var(--err);font-size:14px}

/* ═══════════════════════════════════════════════
 ONBOARDING
 ═══════════════════════════════════════════════ */
#screen-onboarding{background:var(--bg)}
.onboard-content{flex:1;display:flex;flex-direction:column;justify-content:center;padding:32px 28px;padding-top:calc(var(--sat) + 20px)}
.onboard-icon{width:72px;height:72px;border-radius:50%;background:var(--pri-l);display:flex;align-items:center;justify-content:center;margin-bottom:16px}
.onboard-icon .material-symbols-rounded{font-size:36px;color:var(--pri)}
.onboard-content h1{font-size:26px;font-weight:800;margin-bottom:4px}
.onboard-sub{font-size:14px;color:var(--tx2);margin-bottom:28px;line-height:1.5}
.field-hint{font-size:12px;color:var(--tx3);margin:-4px 0 20px;line-height:1.4}

/* ═══════════════════════════════════════════════
 MAIN APP — Tabs
 ═══════════════════════════════════════════════ */
#screen-app{display:none;flex-direction:column}
#screen-app.active{display:flex}
.tab{position:absolute;inset:0;bottom:calc(var(--tab-h) + var(--sab));display:none;flex-direction:column;opacity:0}
.tab.active{display:flex;animation:tabIn .2s ease forwards}
@keyframes tabIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.tab-head{padding:calc(var(--sat) + 16px) 24px 12px;background:var(--bg)}
.tab-head h1{font-size:26px;font-weight:800}
.tab-head .sub{font-size:14px;color:var(--tx2);margin-top:2px}
.tab-body{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:8px 20px 24px}

.tbar{position:fixed;bottom:0;left:0;right:0;display:flex;background:var(--sf);border-top:1px solid var(--brd);z-index:20}
.tb{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;height:var(--tab-h);gap:1px;color:var(--tx3);transition:color .2s}
.tb .material-symbols-rounded{font-size:26px;transition:transform .2s var(--bounce)}
.tb small{font-size:10px;font-weight:600;letter-spacing:.3px}
.tb.active{color:var(--pri)}
.tb.active .material-symbols-rounded{transform:scale(1.12)}

/* ═══════════════════════════════════════════════
 SEARCH BAR + FILTER PILLS
 ═══════════════════════════════════════════════ */
.search-bar{display:flex;align-items:center;background:var(--sf);border:1.5px solid var(--brd);border-radius:var(--r-md);height:46px;padding:0 14px;gap:8px;margin-top:10px;transition:border-color .2s}
.search-bar:focus-within{border-color:var(--pri)}
.search-bar .material-symbols-rounded{font-size:22px;color:var(--tx3)}
.search-bar input{flex:1;background:none;border:none;font-size:15px;color:var(--tx);font-weight:500}
.search-bar input::placeholder{color:var(--tx3)}
.search-clear{width:28px;height:28px;border-radius:50%;background:var(--brd-l);display:flex;align-items:center;justify-content:center;padding:0}
.search-clear .material-symbols-rounded{font-size:16px;color:var(--tx2)}

.filter-row{display:flex;gap:8px;margin-top:10px;overflow-x:auto;scrollbar-width:none;padding-bottom:2px;-webkit-overflow-scrolling:touch}
.filter-row::-webkit-scrollbar{display:none}
.pill{flex-shrink:0;padding:6px 14px;border-radius:var(--r-full);font-size:13px;font-weight:600;border:1.5px solid var(--brd);background:var(--sf);color:var(--tx2);transition:all .2s;white-space:nowrap}
.pill.active{background:var(--pri);color:#fff;border-color:var(--pri)}
.pill:active{transform:scale(.95)}

/* ═══════════════════════════════════════════════
 CARDS LIST
 ═══════════════════════════════════════════════ */
.loyalty-card{position:relative;border-radius:var(--r-lg);padding:22px;margin-bottom:14px;color:#fff;overflow:hidden;cursor:pointer;transition:transform .2s var(--ease);-webkit-tap-highlight-color:transparent}
.loyalty-card:active{transform:scale(.97)}
.loyalty-card::before{content:'';position:absolute;top:-40%;right:-20%;width:200px;height:200px;background:radial-gradient(circle,rgba(255,255,255,.12),transparent 70%);border-radius:50%}
.loyalty-card::after{content:'';position:absolute;bottom:-30%;left:-10%;width:160px;height:160px;background:radial-gradient(circle,rgba(255,255,255,.08),transparent 70%);border-radius:50%}
.lc-head{display:flex;align-items:center;margin-bottom:16px;position:relative;z-index:1}
.lc-name{font-size:17px;font-weight:700;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:8px}
.lc-icon{width:34px;height:34px;border-radius:50%;background:rgba(255,255,255,.18);display:flex;align-items:center;justify-content:center;margin-right:10px;flex-shrink:0}
.lc-icon .material-symbols-rounded{font-size:18px}
.lc-arrow{color:rgba(255,255,255,.5)}
.lc-pts{display:flex;align-items:baseline;gap:6px;margin-bottom:10px;position:relative;z-index:1}
.lc-pts-big{font-size:32px;font-weight:800}
.lc-pts-tot{font-size:15px;font-weight:500;opacity:.75}
.lc-prog{height:8px;background:rgba(255,255,255,.2);border-radius:4px;overflow:hidden;position:relative;z-index:1}
.lc-prog-fill{height:100%;background:#fff;border-radius:4px;transition:width .6s var(--ease);min-width:4px}
.lc-foot{display:flex;justify-content:space-between;align-items:center;margin-top:14px;position:relative;z-index:1}
.lc-reward{display:inline-flex;align-items:center;gap:4px;background:#fff;padding:4px 10px;border-radius:var(--r-full);font-size:12px;font-weight:700}
.lc-reward .material-symbols-rounded{font-size:14px}
.lc-left{font-size:13px;opacity:.8;font-weight:500}
.lc-date{font-size:11px;opacity:.5}
.lc-bday{display:flex;align-items:center;gap:5px;font-size:11px;color:rgba(255,255,255,.7);margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,.15);position:relative;z-index:1}
.lc-bday svg{flex-shrink:0}
.lc-bday-active{color:#fff;font-weight:700;animation:bdayPulse 2s ease-in-out infinite}
@keyframes bdayPulse{0%,100%{opacity:.9}50%{opacity:1}}
.lc-fav{position:absolute;top:12px;right:12px;z-index:2;color:rgba(255,255,255,.85)}
.lc-fav .material-symbols-rounded{font-size:20px;font-variation-settings:'FILL' 1}

/* Card themes — merchant-specific */
.theme-teal{background:linear-gradient(135deg,#0e7490,#0891B2)}
.theme-navy{background:linear-gradient(135deg,#0a1a24,#0891B2)}
.theme-violet{background:linear-gradient(135deg,#4c1d95,#7c3aed)}
.theme-forest{background:linear-gradient(135deg,#064e3b,#059669)}
.theme-brick{background:linear-gradient(135deg,#9f1239,#e11d48)}
.theme-amber{background:linear-gradient(135deg,#92400e,#d97706)}
.theme-slate{background:linear-gradient(135deg,#1e293b,#475569)}

.loyalty-card{animation:cardIn .4s var(--ease) both}
.loyalty-card:nth-child(1){animation-delay:.05s}
.loyalty-card:nth-child(2){animation-delay:.1s}
.loyalty-card:nth-child(3){animation-delay:.15s}
.loyalty-card:nth-child(4){animation-delay:.2s}
.loyalty-card:nth-child(5){animation-delay:.25s}
@keyframes cardIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}

.empty{display:flex;flex-direction:column;align-items:center;text-align:center;padding:80px 24px;gap:8px}
.empty .material-symbols-rounded{font-size:56px;color:var(--tx3);margin-bottom:8px}
.empty h3{font-size:18px;font-weight:700}
.empty p{font-size:14px;color:var(--tx2);line-height:1.5;margin-bottom:12px}

/* ═══════════════════════════════════════════════
 CARD DETAIL
 ═══════════════════════════════════════════════ */
.card-hero{padding:calc(var(--sat) + 12px) 24px 28px;border-radius:0 0 var(--r-xl) var(--r-xl);color:#fff;position:relative;overflow:hidden}
.card-hero::before{content:'';position:absolute;top:-60%;right:-30%;width:300px;height:300px;background:radial-gradient(circle,rgba(255,255,255,.1),transparent 70%);border-radius:50%}
.card-hero-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;position:relative;z-index:1}
.btn-back,.btn-fav{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;color:#fff;transition:background .2s}
.btn-back:active,.btn-fav:active{background:rgba(255,255,255,.3)}
.btn-fav .material-symbols-rounded.filled{font-variation-settings:'FILL' 1}
.card-hero h1{font-size:24px;font-weight:800;margin-bottom:2px;position:relative;z-index:1}
.cd-type{font-size:13px;color:rgba(255,255,255,.65);font-weight:500;margin-bottom:8px;position:relative;z-index:1}
.cd-pts{display:flex;align-items:baseline;gap:8px;margin-bottom:12px;position:relative;z-index:1}
.cd-pts-big{font-size:44px;font-weight:800;line-height:1}
.cd-pts-tot{font-size:16px;opacity:.7;font-weight:500}
.prog-lg{height:10px;background:rgba(255,255,255,.2);border-radius:5px;overflow:hidden;position:relative;z-index:1}
.prog-fill{height:100%;background:#fff;border-radius:5px;transition:width .8s var(--ease)}
#cd-badge{position:relative;z-index:1;margin-top:14px}
.cd-reward-pill{display:inline-flex;align-items:center;gap:6px;background:#fff;padding:6px 14px;border-radius:var(--r-full);font-size:13px;font-weight:700}
.cd-reward-pill .material-symbols-rounded{font-size:16px}
.cd-until{font-size:14px;opacity:.8;font-weight:500}

.card-body{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:20px}

.stats-row{display:flex;gap:10px;margin-bottom:16px}
.cd-desc{font-size:13px;color:var(--tx2);line-height:1.55;margin:0 0 16px;padding:12px 14px;background:var(--bg2);border-radius:var(--r);border-left:3px solid var(--pri)}
.cd-bday-gift{display:flex;align-items:center;gap:12px;padding:12px 14px;background:linear-gradient(135deg,#FDF2F8,#F5F3FF);border-radius:var(--r);margin:0 0 16px;border:1px solid #F3E8FF}
.cd-bday-gift.hidden{display:none}
.cd-bday-icon{width:36px;height:36px;border-radius:10px;background:linear-gradient(135deg,#FDE7F0,#EDE9FE);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.cd-bday-text{flex:1;min-width:0}
.cd-bday-label{font-size:12px;font-weight:700;color:#7C3AED}
.cd-bday-desc{font-size:13px;color:#1E293B;margin-top:2px}
.cd-bday-gift.active{border-color:#C084FC;box-shadow:0 0 12px rgba(147,51,234,.15)}
.cd-bday-gift.active .cd-bday-label{color:#9333EA;font-size:12px}
.stat{flex:1;background:var(--sf);border-radius:var(--r-md);padding:14px 8px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.stat .material-symbols-rounded{font-size:22px;color:var(--pri);display:block;margin-bottom:4px}
.stat strong{font-size:17px;font-weight:700;display:block}
.stat small{font-size:11px;color:var(--tx3);font-weight:500}

.menu-row{display:flex;align-items:center;width:100%;background:var(--sf);border-radius:var(--r-md);padding:16px;margin-bottom:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);gap:12px;transition:transform .15s}
.menu-row:active{transform:scale(.98)}
.mi{font-size:22px;color:var(--pri)}
.ml{flex:1;font-size:15px;font-weight:600;text-align:left}
.ma{font-size:20px;color:var(--tx3)}

.sec-title{font-size:14px;font-weight:700;color:var(--tx);margin:20px 0 10px;letter-spacing:.3px}
.info-card{background:var(--sf);border-radius:var(--r-md);padding:4px 16px;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.info-row{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--brd-l);cursor:pointer;transition:opacity .15s}
.info-row:last-child{border-bottom:none}
.info-row:active{opacity:.7}
.info-row .material-symbols-rounded{font-size:20px;color:var(--pri);flex-shrink:0}
.info-row span:nth-child(2){flex:1;font-size:14px;color:var(--tx2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.info-row .material-symbols-rounded:last-child{font-size:16px;color:var(--tx3)}

.hour-row{display:flex;justify-content:space-between;padding:8px 16px;border-bottom:1px solid var(--brd-l)}
.hour-row:last-child{border-bottom:none}
.hour-row.today{background:var(--pri-l);border-radius:6px}
.hour-day{font-size:14px;color:var(--tx2);font-weight:500}
.hour-val{font-size:14px;color:var(--tx);font-weight:600}
.hour-row.today .hour-day,.hour-row.today .hour-val{color:var(--pri)}

/* ═══════════════════════════════════════════════
 HISTORY
 ═══════════════════════════════════════════════ */
.sheet-head{display:flex;align-items:center;gap:12px;padding:calc(var(--sat) + 12px) 20px 12px;background:var(--sf);border-bottom:1px solid var(--brd)}
.sheet-head h1{flex:1;font-size:22px;font-weight:800}
.btn-back-dark{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:background .2s}
.btn-back-dark:active{background:var(--brd-l)}
.badge{font-size:13px;color:var(--tx3);font-weight:500}
.hist-list{flex:1;overflow-y:auto;-webkit-overflow-scrolling:touch;padding:0 20px}
.tx-row{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1px solid var(--brd-l)}
.tx-icon{width:40px;height:40px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.tx-icon .material-symbols-rounded{font-size:20px}
.tx-body{flex:1;min-width:0}
.tx-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:2px}
.tx-type{font-size:15px;font-weight:600}
.tx-pts{font-size:15px;font-weight:700}
.tx-pts.pos{color:var(--ok)}
.tx-pts.neg{color:var(--err)}
.tx-bot{display:flex;justify-content:space-between}
.tx-detail{font-size:13px;color:var(--tx3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;margin-right:8px}
.tx-date{font-size:12px;color:var(--tx3);flex-shrink:0}

/* ═══════════════════════════════════════════════
 SCANNER
 ═══════════════════════════════════════════════ */
.scanner-wrap{position:relative;flex:1;background:#000;overflow:hidden}
#scan-video{width:100%;height:100%;object-fit:cover;display:none}
.scan-ui{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:24px;padding:24px}
.scan-ui h2{color:#fff;font-size:20px;font-weight:700;text-shadow:0 2px 8px rgba(0,0,0,.4)}
.scan-ui p{color:rgba(255,255,255,.6);font-size:14px;margin-top:4px;text-shadow:0 1px 4px rgba(0,0,0,.3)}
.scan-frame{width:240px;height:240px;position:relative}
.c{position:absolute;width:28px;height:28px;border-color:#fff}
.tl{top:0;left:0;border-top:3.5px solid;border-left:3.5px solid;border-radius:4px 0 0 0}
.tr{top:0;right:0;border-top:3.5px solid;border-right:3.5px solid;border-radius:0 4px 0 0}
.bl{bottom:0;left:0;border-bottom:3.5px solid;border-left:3.5px solid;border-radius:0 0 0 4px}
.br{bottom:0;right:0;border-bottom:3.5px solid;border-right:3.5px solid;border-radius:0 0 4px 0}
.scan-beam{position:absolute;left:10%;right:10%;height:2px;background:linear-gradient(90deg,transparent,var(--pri),transparent);box-shadow:0 0 12px var(--pri);animation:scanBeam 2.5s ease-in-out infinite}
@keyframes scanBeam{0%,100%{top:10%}50%{top:88%}}
.btn-glass{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.92);backdrop-filter:blur(12px);color:var(--pri);font-size:15px;font-weight:600;padding:12px 24px;border-radius:var(--r-full);box-shadow:0 4px 16px rgba(0,0,0,.15);transition:transform .15s}
.btn-glass:active{transform:scale(.95)}
.scan-no-cam{position:absolute;inset:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;text-align:center;gap:8px}
.scan-no-cam .material-symbols-rounded{font-size:56px;color:var(--tx3)}
.scan-no-cam h3{font-size:18px;font-weight:700}
.scan-no-cam p{font-size:14px;color:var(--tx2);margin-bottom:16px}

/* ═══════════════════════════════════════════════
 PROFILE
 ═══════════════════════════════════════════════ */
.prof-card{background:var(--sf);border-radius:var(--r-lg);padding:24px;margin-bottom:14px;box-shadow:0 2px 12px rgba(0,0,0,.04);text-align:center}
.prof-avatar{width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,#0891B2,#22d3ee);color:#fff;font-size:24px;font-weight:700;display:flex;align-items:center;justify-content:center;margin:0 auto 12px;box-shadow:0 4px 16px var(--pri-glow)}
.prof-complete{display:flex;align-items:center;gap:12px;background:var(--pri-l);border:1.5px solid rgba(8,145,178,.15);border-radius:var(--r-md);padding:14px 16px;margin-bottom:14px}
.prof-name-row{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:12px}
.prof-name-row h2{font-size:19px;font-weight:700}
.btn-icon{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--tx3);transition:background .2s}
.btn-icon:active{background:var(--brd-l)}
.btn-icon .material-symbols-rounded{font-size:18px}
.prof-info{text-align:left}
.prof-row{display:flex;align-items:center;gap:10px;padding:6px 0;font-size:14px;color:var(--tx2)}
.prof-row .material-symbols-rounded{font-size:18px;color:var(--tx3)}

.notif-card{background:var(--sf);border-radius:var(--r-md);padding:0 16px;box-shadow:0 2px 8px rgba(0,0,0,.04);margin-bottom:14px}
.notif-row{display:flex;align-items:center;gap:12px;padding:14px 0;border-bottom:1px solid var(--brd-l);cursor:pointer}
.notif-row.last{border-bottom:none}
.notif-row .material-symbols-rounded{font-size:22px;color:var(--tx2)}
.notif-row span:nth-child(2){flex:1;font-size:15px;font-weight:500}
.notif-row input{display:none}
.tog{width:46px;height:26px;background:var(--brd);border-radius:13px;position:relative;transition:background .25s;flex-shrink:0}
.tog::after{content:'';position:absolute;top:3px;left:3px;width:20px;height:20px;border-radius:50%;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.15);transition:transform .25s var(--bounce)}
.notif-row input:checked+.tog{background:var(--pri)}
.notif-row input:checked+.tog::after{transform:translateX(20px)}

.btn-danger{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;height:48px;color:var(--err);font-size:15px;font-weight:600;border-radius:var(--r-md);transition:background .2s;margin-top:8px}
.btn-danger:active{background:var(--err-l)}
.version{text-align:center;font-size:12px;color:var(--tx3);margin-top:16px;padding-bottom:20px}

/* ═══════════════════════════════════════════════
 MODALS
 ═══════════════════════════════════════════════ */
.modal{position:fixed;inset:0;z-index:100;display:none;align-items:flex-end;justify-content:center}
.modal.open{display:flex}
.modal-bg{position:absolute;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(4px);animation:fadeIn .25s both}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.modal-sheet{position:relative;width:100%;max-width:420px;background:var(--sf);border-radius:var(--r-xl) var(--r-xl) 0 0;padding:20px 28px calc(32px + var(--sab));text-align:center;animation:sheetUp .35s var(--ease) both;max-height:85vh;overflow-y:auto}
.modal-sheet.sm{padding-bottom:calc(24px + var(--sab))}
@keyframes sheetUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.modal-pill{width:36px;height:4px;background:var(--brd);border-radius:2px;margin:0 auto 16px}
.modal-x{position:absolute;top:16px;right:16px;width:36px;height:36px;border-radius:50%;background:var(--sf2);display:flex;align-items:center;justify-content:center;color:var(--tx3);transition:background .2s}
.modal-x:active{background:var(--brd)}
.modal-sheet h2{font-size:20px;font-weight:700;margin-bottom:4px}
.modal-sub{font-size:14px;color:var(--tx2);margin-bottom:24px}
.qr-wrap{background:var(--sf);border-radius:var(--r-lg);padding:24px;display:inline-flex;flex-direction:column;align-items:center;box-shadow:0 8px 32px rgba(0,0,0,.08);margin-bottom:16px}
.qr-wrap canvas{border-radius:8px}
.qr-name{margin-top:14px;font-size:16px;font-weight:600;color:var(--tx)}

/* ═══════════════════════════════════════════════
 GIFT SYSTEM
 ═══════════════════════════════════════════════ */
.gift-box{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,var(--warn-l),#fff7ed);display:flex;align-items:center;justify-content:center;margin-bottom:16px}
.gift-box .material-symbols-rounded{font-size:40px;color:var(--rew)}
.gift-box.ok{background:var(--ok-l)}
.gift-box.ok .material-symbols-rounded{color:var(--ok)}
.gift-box.err{background:var(--err-l)}
.gift-box.err .material-symbols-rounded{color:var(--err)}
.gift-sub{color:var(--tx2);font-size:14px;line-height:1.5;max-width:300px}
.gift-amount{font-size:48px;font-weight:800;color:var(--pri);margin:8px 0 4px}
.gift-merchant{font-size:15px;font-weight:600;color:var(--tx2);margin-bottom:4px}
.gift-expires{font-size:12px;color:var(--tx3)}

.gift-confirm-card{background:var(--sf2);border-radius:var(--r-lg);padding:24px;margin:16px 0}
.gift-confirm-pts{font-size:48px;font-weight:800;color:var(--rew);line-height:1}
.gift-confirm-label{font-size:14px;color:var(--tx2);margin-top:6px}
.gift-warn{font-size:12px;color:var(--tx3);line-height:1.5;margin-bottom:20px;padding:0 8px}

.gift-link-box{display:flex;gap:8px;margin-bottom:20px;background:var(--sf2);border-radius:var(--r-md);padding:4px 4px 4px 16px;align-items:center}
.gift-link-input{flex:1;background:none;font-size:13px;color:var(--tx);font-weight:500;border:none;outline:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.btn-copy{width:44px;height:44px;border-radius:var(--r-sm);background:var(--pri);color:#fff;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:transform .15s}
.btn-copy:active{transform:scale(.9)}
.gift-share-btns{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
.btn-share{display:flex;align-items:center;gap:6px;padding:10px 20px;border-radius:var(--r-full);font-size:14px;font-weight:600;color:#fff;transition:transform .15s}
.btn-share:active{transform:scale(.95)}
.btn-share.whatsapp{background:#25D366}
.btn-share.sms{background:#007AFF}
.btn-share.generic{background:var(--tx2)}

/* ═══════════════════════════════════════════════
 TOAST — Fixed: opacity transition prevents black box
 ═══════════════════════════════════════════════ */
.toast{position:fixed;bottom:calc(var(--tab-h) + var(--sab) + 16px);left:50%;transform:translateX(-50%) translateY(80px);opacity:0;visibility:hidden;background:var(--tx);color:#fff;font-size:14px;font-weight:600;padding:12px 24px;border-radius:var(--r-full);box-shadow:0 8px 24px rgba(0,0,0,.2);z-index:200;transition:transform .35s var(--bounce),opacity .35s ease,visibility .35s ease;white-space:nowrap;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1;visibility:visible}

/* ═══════════════════════════════════════════════
 FLOATING QR BUTTON
 ═══════════════════════════════════════════════ */
.fab-qr{position:absolute;bottom:20px;right:20px;width:56px;height:56px;border-radius:50%;background:#1e293b;color:#fff;border:2px solid rgba(255,255,255,.15);cursor:pointer;z-index:15;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 24px rgba(0,0,0,.4);transition:transform .2s,box-shadow .2s}
.fab-qr:active{transform:scale(.92)}
.fab-qr:hover{box-shadow:0 6px 28px rgba(8,145,178,.5)}
.fab-qr .material-symbols-rounded{font-size:28px}

/* ═══════════════════════════════════════════════
 DELETE ACCOUNT
 ═══════════════════════════════════════════════ */
.prof-danger-zone{margin-top:32px;padding-top:24px;border-top:1px solid var(--brd)}
.btn-hide-card{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;height:44px;margin-top:24px;border-radius:var(--r-md);border:none;background:transparent;color:var(--tx3);font-size:13px;font-weight:600;cursor:pointer;transition:color .2s}
.btn-hide-card:active{color:var(--err)}
.btn-hide-card .material-symbols-rounded{font-size:18px}
.btn-danger-outline{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;height:48px;border-radius:var(--r-md);border:1.5px solid var(--err);background:transparent;color:var(--err);font-size:14px;font-weight:700;cursor:pointer;transition:all .2s}
.btn-danger-outline:active{background:rgba(239,68,68,.1)}
.btn-danger-outline .material-symbols-rounded{font-size:20px}

/* ═══════════════════════════════════════════════
 POINTS / REWARD ANIMATION OVERLAY
 ═══════════════════════════════════════════════ */
.anim-overlay{position:fixed;inset:0;z-index:300;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);opacity:0;transition:opacity .3s ease;pointer-events:none}
.anim-overlay.show{opacity:1;pointer-events:auto}
.anim-overlay.hidden{display:none}
.anim-content{text-align:center;animation:animPop .5s cubic-bezier(.34,1.56,.64,1) both}
.anim-icon{width:96px;height:96px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;font-size:48px}
.anim-icon.credit{background:rgba(16,185,129,.2);color:#34d399}
.anim-icon.reward{background:rgba(245,158,11,.2);color:#fbbf24}
.anim-text{font-size:32px;font-weight:800;color:#fff;margin-bottom:8px}
.anim-sub{font-size:16px;color:rgba(255,255,255,.7);font-weight:500}
@keyframes animPop{0%{opacity:0;transform:scale(.5) translateY(40px)}100%{opacity:1;transform:scale(1) translateY(0)}}

.anim-particles{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.anim-particle{position:absolute;width:8px;height:8px;border-radius:50%;animation:particleFly 1.2s ease-out forwards;opacity:0}
@keyframes particleFly{0%{opacity:1;transform:translate(0,0) scale(1)}100%{opacity:0;transform:translate(var(--dx),var(--dy)) scale(0)}}
