<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no, maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0d9488">
  <meta name="description" content="FIDDO ‚Äî Programme fid√©lit√© restaurants belges">
  <title>FIDDO</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,500,1,0&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-login" class="screen active">
    <div class="login-bg">
      <div class="login-orb orb-1"></div>
      <div class="login-orb orb-2"></div>
      <div class="login-orb orb-3"></div>
    </div>
    <div class="login-content">
      <div class="login-logo"><span>F</span></div>
      <h1 class="login-title">FIDDO</h1>
      <p class="login-tagline">Votre fid√©lit√© r√©compens√©e</p>
      <div id="login-form" class="login-form">
        <div class="field">
          <span class="material-symbols-rounded field-icon">mail</span>
          <input type="email" id="login-email" placeholder="Votre adresse email" autocomplete="email" autocapitalize="none" inputmode="email">
        </div>
        <button class="btn-primary" id="btn-login">
          <span>Recevoir mon lien</span>
          <span class="material-symbols-rounded">east</span>
        </button>
        <p class="login-hint">Connexion s√©curis√©e par email ‚Äî aucun mot de passe</p>
      </div>
      <div id="login-sent" class="login-sent hidden">
        <div class="sent-anim"><span class="material-symbols-rounded">mark_email_read</span></div>
        <h2>V√©rifiez votre email</h2>
        <p>Un lien a √©t√© envoy√© √†</p>
        <p class="sent-email" id="sent-email"></p>
        <p class="sent-hint">Le lien expire dans 5 minutes</p>
        <button class="btn-secondary" id="btn-resend">
          <span class="material-symbols-rounded">refresh</span><span>Renvoyer</span>
        </button>
        <a class="link-muted" id="btn-change-email">Changer d'adresse</a>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê VERIFY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-verify" class="screen">
    <div class="center-col">
      <div class="loader"></div>
      <h2>Connexion en cours‚Ä¶</h2>
      <p id="verify-error" class="error-text hidden"></p>
      <a id="verify-retry" class="link-muted hidden" onclick="App.show('screen-login')">‚Üê Retour</a>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ONBOARDING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-onboarding" class="screen">
    <div class="onboard-content">
      <div class="onboard-icon"><span class="material-symbols-rounded">waving_hand</span></div>
      <h1>Bienvenue !</h1>
      <p class="onboard-sub">Compl√©tez votre profil pour que les commerces vous reconnaissent</p>
      <div class="field"><span class="material-symbols-rounded field-icon">person</span><input type="text" id="onboard-name" placeholder="Votre nom" autocapitalize="words"></div>
      <div class="field"><span class="material-symbols-rounded field-icon">call</span><input type="tel" id="onboard-phone" placeholder="+32 490 12 34 56"></div>
      <div class="field"><span class="material-symbols-rounded field-icon">cake</span><input type="date" id="onboard-dob"></div>
      <p class="field-hint">üéÇ Recevez un cadeau le jour de votre anniversaire</p>
      <button class="btn-primary" id="btn-onboard">Continuer</button>
      <a class="link-muted" id="btn-skip-onboard">Plus tard</a>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MAIN APP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-app" class="screen">

    <!-- TAB: Cards -->
    <section id="tab-cards" class="tab active">
      <header class="tab-head">
        <div><h1 id="greeting">Bonjour üëã</h1><p id="greeting-sub" class="sub"></p></div>
      </header>
      <div class="tab-body" id="cards-scroll">
        <div id="cards-list"></div>
        <div id="cards-empty" class="empty hidden">
          <span class="material-symbols-rounded">wallet</span>
          <h3>Pas encore de carte</h3>
          <p>Scannez le QR code d'un restaurant partenaire pour commencer.</p>
          <button class="btn-secondary" onclick="App.switchTab('scanner')"><span class="material-symbols-rounded">qr_code_scanner</span><span>Scanner un QR</span></button>
        </div>
      </div>
    </section>

    <!-- TAB: Scanner -->
    <section id="tab-scanner" class="tab">
      <div class="scanner-wrap">
        <video id="scan-video" playsinline autoplay muted></video>
        <div class="scan-ui">
          <h2>Scanner le QR</h2>
          <p>Placez le code dans le cadre</p>
          <div class="scan-frame">
            <i class="c tl"></i><i class="c tr"></i><i class="c bl"></i><i class="c br"></i>
            <div class="scan-beam"></div>
          </div>
          <button class="btn-glass" onclick="App.showMyQR()"><span class="material-symbols-rounded">qr_code_2</span><span>Mon QR</span></button>
        </div>
        <div id="scan-no-cam" class="scan-no-cam hidden">
          <span class="material-symbols-rounded">no_photography</span>
          <h3>Cam√©ra requise</h3>
          <p>Autorisez l'acc√®s pour scanner.</p>
          <button class="btn-primary" onclick="App.startScanner()">Autoriser</button>
        </div>
      </div>
    </section>

    <!-- TAB: Profile -->
    <section id="tab-profile" class="tab">
      <header class="tab-head"><h1>Profil</h1></header>
      <div class="tab-body">
        <div class="prof-card">
          <div class="prof-avatar" id="prof-avatar">?</div>
          <div class="prof-name-row"><h2 id="prof-name">‚Äî</h2><button class="btn-icon" onclick="App.editName()"><span class="material-symbols-rounded">edit</span></button></div>
          <div class="prof-info">
            <div class="prof-row"><span class="material-symbols-rounded">mail</span><span id="prof-email">‚Äî</span></div>
            <div class="prof-row hidden" id="prof-phone-row"><span class="material-symbols-rounded">call</span><span id="prof-phone"></span></div>
            <div class="prof-row hidden" id="prof-dob-row"><span class="material-symbols-rounded">cake</span><span id="prof-dob"></span></div>
          </div>
        </div>
        <button class="menu-row" onclick="App.showMyQR()"><span class="material-symbols-rounded mi">qr_code_2</span><span class="ml">Mon QR code</span><span class="material-symbols-rounded ma">chevron_right</span></button>
        <h3 class="sec-title">Notifications</h3>
        <div class="notif-card">
          <label class="notif-row"><span class="material-symbols-rounded">add_circle</span><span>Nouveaux points</span><input type="checkbox" id="notif-credit" checked><span class="tog"></span></label>
          <label class="notif-row"><span class="material-symbols-rounded">redeem</span><span>R√©compense dispo</span><input type="checkbox" id="notif-reward" checked><span class="tog"></span></label>
          <label class="notif-row"><span class="material-symbols-rounded">campaign</span><span>Promotions</span><input type="checkbox" id="notif-promo" checked><span class="tog"></span></label>
          <label class="notif-row last"><span class="material-symbols-rounded">celebration</span><span>Anniversaire</span><input type="checkbox" id="notif-birthday" checked><span class="tog"></span></label>
        </div>
        <button class="btn-danger" onclick="App.logout()"><span class="material-symbols-rounded">logout</span><span>Se d√©connecter</span></button>
        <p class="version">FIDDO v1.0.0</p>
      </div>
    </section>

    <!-- Tab Bar -->
    <nav class="tbar" id="tbar">
      <button class="tb active" data-tab="cards" onclick="App.switchTab('cards')"><span class="material-symbols-rounded">wallet</span><small>Cartes</small></button>
      <button class="tb" data-tab="scanner" onclick="App.switchTab('scanner')"><span class="material-symbols-rounded">qr_code_scanner</span><small>Scanner</small></button>
      <button class="tb" data-tab="profile" onclick="App.switchTab('profile')"><span class="material-symbols-rounded">person</span><small>Profil</small></button>
    </nav>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CARD DETAIL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-card" class="screen slide-r">
    <div class="card-hero" id="card-hero">
      <button class="btn-back" onclick="App.goBack()"><span class="material-symbols-rounded">arrow_back</span></button>
      <h1 id="cd-name"></h1>
      <div class="cd-pts"><span class="cd-pts-big" id="cd-pts"></span><span class="cd-pts-tot" id="cd-pts-tot"></span></div>
      <div class="prog-lg"><div class="prog-fill" id="cd-prog"></div></div>
      <div id="cd-badge"></div>
    </div>
    <div class="card-body" id="card-body">
      <div class="stats-row">
        <div class="stat"><span class="material-symbols-rounded">footprint</span><strong id="cd-visits">0</strong><small>Visites</small></div>
        <div class="stat"><span class="material-symbols-rounded">payments</span><strong id="cd-spent">0‚Ç¨</strong><small>D√©pens√©</small></div>
        <div class="stat"><span class="material-symbols-rounded">speed</span><strong id="cd-ratio">0</strong><small>pts/‚Ç¨</small></div>
      </div>
      <button class="menu-row" onclick="App.showHistory()"><span class="material-symbols-rounded mi">history</span><span class="ml">Historique</span><span class="material-symbols-rounded ma">chevron_right</span></button>
      <h3 class="sec-title">Informations</h3>
      <div class="info-card" id="cd-info"></div>
      <div id="cd-hours-wrap" class="hidden"><h3 class="sec-title">Horaires</h3><div class="info-card" id="cd-hours"></div></div>
      <button class="btn-primary btn-full" id="btn-maps" onclick="App.openMaps()"><span class="material-symbols-rounded">near_me</span><span>Itin√©raire</span></button>
      <div style="height:32px"></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HISTORY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-history" class="screen slide-r">
    <header class="sheet-head"><button class="btn-back-dark" onclick="App.goBack()"><span class="material-symbols-rounded">arrow_back</span></button><h1>Historique</h1><span class="badge" id="hist-count"></span></header>
    <div class="hist-list" id="hist-list"></div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: MY QR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="modal-qr" class="modal">
    <div class="modal-bg" onclick="App.closeModal()"></div>
    <div class="modal-sheet">
      <div class="modal-pill"></div>
      <button class="modal-x" onclick="App.closeModal()"><span class="material-symbols-rounded">close</span></button>
      <h2>Mon QR code</h2>
      <p class="modal-sub">Pr√©sentez ce code au caissier</p>
      <div class="qr-wrap"><canvas id="qr-canvas" width="220" height="220"></canvas><p id="qr-name" class="qr-name"></p></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODAL: EDIT NAME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="modal-edit" class="modal">
    <div class="modal-bg" onclick="App.closeModal()"></div>
    <div class="modal-sheet sm">
      <div class="modal-pill"></div>
      <h2>Modifier le nom</h2>
      <div class="field"><span class="material-symbols-rounded field-icon">person</span><input type="text" id="edit-name" placeholder="Votre nom"></div>
      <button class="btn-primary" id="btn-save-name">Enregistrer</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"></div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="js/api.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
